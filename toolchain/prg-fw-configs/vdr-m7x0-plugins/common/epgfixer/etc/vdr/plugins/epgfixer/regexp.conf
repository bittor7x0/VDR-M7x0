#
# Configuración para unificar y corregir la EPG de los canales TDT españoles.
# Probada activando todas las correcciones de errores EPG del plugin epgfixer y estableciendo el "Nivel de corrección de EPG" en el VDR a "0".
#
# Obtener los ids de los canales:
#   svdrpsend 127.0.0.1 2001 "LSTC :ids"
# Recargar el archivo regexp.conf:
#   svdrpsend 127.0.0.1 2001 "PLUG epgfixer RLRE"
# Limpiar la EPG de todos los canales:
#   svdrpsend 127.0.0.1 2001 "CLRE"
# Obtener datos de la EPG para todos los canales:
#   svdrpsend 127.0.0.1 2001 "SCAN"
#

#   T-8916-1101-420    La 1
#   T-8916-1101-424    La 1 HD
# Unificar películas con el prefijo "CINE: "
T-8916-1101-420,T-8916-1101-424:title=s/^(SESION DE TARDE|LA PELICULA DE LA SEMANA|CINE DE BARRIO) /CINE: /
T-8916-1101-420,T-8916-1101-424:title?title~m/^(?!.*(CINE DE BARRIO))/=s/^CINE /CINE: /

#   T-8916-1101-421    La 2
#   T-8916-1101-428    La 2 HD
# Eliminar texto innecesario
T-8916-1101-421,T-8916-1101-428:title=s/^DOCUMENTOS TV DOCUMENTOS TV/DOCUMENTOS TV/
T-8916-1101-421,T-8916-1101-428:title=s/^LA NOCHE TEMATICA LA NOCHE TEMATICA/LA NOCHE TEMATICA/
T-8916-1101-421,T-8916-1101-428:title=s/^VERSI(O|Ó)N ESPAÑOLA VERSI(O|Ó)N ESPAÑOLA/VERSIÓN ESPAÑOLA/
# Unificar películas con el prefijo "CINE: "
T-8916-1101-421,T-8916-1101-428:title=s/^(EL CINE DE LA 2|HISTORIA DE NUESTRO CINE|VERSI(O|Ó)N ESPAÑOLA,?|MAÑANAS DE CINE|DIAS DE CINE CLASICO|CINE) /CINE: /
T-8916-1101-421,T-8916-1101-428:title=s/^(MAÑANAS DE CINE|DIAS DE CINE CLASICO)/CINE/
# Unificar documentales con el prefijo "DOC: "
T-8916-1101-421,T-8916-1101-428:title=s/^(EL DOCUMENTAL DE LA 2|GRANDES DOCUMENTALES|DOCUMENTAL|DOCUMENTA2|DOCUMASTER) /DOC: /

#   T-8916-15-150      antena3
#   T-8916-15-149      antena3 HD
# Unificar películas con el prefijo "CINE: "
T-8916-15-150,T-8916-15-149:title=s/^(MULTICINE|EL PELICULÓN): /CINE: /
# Eliminar texto innecesario
T-8916-15-150,T-8916-15-149:title=s/ \(estreno\)$//i
T-8916-15-150,T-8916-15-149:description=s/ \(estreno\)$//

#   T-8916-16-187      Cuatro
#   T-8916-16-191      Cuatro HD
# Unificar películas con el prefijo "CINE: "
T-8916-16-187,T-8916-16-191:title=s/^(EL BLOCKBUSTER( KIDS)?|HOME CINEMA|CINE CUATRO): /CINE: /

#   T-8916-16-186      Telecinco
#   T-8916-16-190      Telecinco HD
# Unificar películas con el prefijo "CINE: "
T-8916-16-186,T-8916-16-190:title=s/^CINE 5 ESTRELLAS: /CINE: /

#   T-8916-15-152      laSexta
#   T-8916-15-151      laSexta HD
# Unificar películas con el prefijo "CINE: "
T-8916-15-152,T-8916-15-151:title=s/^(EL TAQUILLAZO:|CINE.) /CINE: /
# Eliminar texto innecesario
T-8916-15-152,T-8916-15-151:title=s/ \([ ]?Estreno\)$//

#   T-8916-1001-10160  ARAGON TV
#   T-8916-1001-10162  ARAGON TV HD
# Unificar películas con el prefijo "CINE: "
T-8916-1001-10160,T-8916-1001-10162:title=s/^CINE. /CINE: /
# Unificar documentales con el prefijo "DOC: "
T-8916-1001-10160,T-8916-1001-10162:title=s/^DOCUMENTAL. /DOC: /
T-8916-1001-10160,T-8916-1001-10162:description=s/^Sinopsis: //
# Copiar el número del episodio del título (". Eo 1234." o ". Eo 1234. TEXTO") al inicio del texto corto
T-8916-1001-10160,T-8916-1001-10162:title=m/[.][ ](?<pshorttext>[E][p][ ][0-9S]{1,5}[.])[ ]?/
T-8916-1001-10160,T-8916-1001-10162:shorttext=s/^Ep /Ep: /
# Eliminar el número del episodio del título
T-8916-1001-10160,T-8916-1001-10162:title?title~m/[.][ ][E][p][ ][0-9S]{1,5}[.][ ]?/=s/[E][p][ ][0-9S]{1,5}[.][ ]?//
# Establecer la calificación parental
T-8916-1001-10160,T-8916-1001-10162:shorttext=s/^\(\+0/(+/
T-8916-1001-10160,T-8916-1001-10162:shorttext=m/^[(][+](?<rating>[0-9S]{1,2})[)][ ](?<shorttext>.*)$/
T-8916-1001-10160,T-8916-1001-10162:description=s/^\(\+0/(+/
T-8916-1001-10160,T-8916-1001-10162:description=m/^[(][+](?<rating>[0-9S]{1,2})[)][ ](?<description>.*)$/
# Eliminar el punto final del título y texto corto
T-8916-1001-10160,T-8916-1001-10162:title=s/[.][ ]?$//
T-8916-1001-10160,T-8916-1001-10162:shorttext=s/[.][ ]?$//
# Eliminar texto innecesario
T-8916-1001-10160,T-8916-1001-10162:shorttext=s/ Duración: [0-9S]{1,3} min. ?//
T-8916-1001-10160,T-8916-1001-10162:description=s/ Duración: [0-9S]{1,3} min. ?//

#   T-8916-16-189      Divinity
T-8916-16-189:title=s/^SCYD( XMAS EDITION)?: /CINE: /
# Eliminar texto innecesario
T-8916-16-189:title=s/^(DIVINITY HOME|DIVINITY THE HOME CHANNEL|SOFANTAST(I|T)C .*?): //

#   T-8916-18-104      TEN
# Eliminar texto innecesario
T-8916-18-104:title=s/ [(](AD|LSE)[)]//
T-8916-18-104:description=s/ [(](AD|LSE|Audiodescripción)[)]//g
# Eliminar la temporada del título " (T12)" porque ya se incluye en el texto corto o description
T-8916-18-104:title=s/ \(T[0-9S]{1,2}\)$//
# Move temporada y episodio al texto corto
T-8916-18-104:shorttext=m/(?<shorttext>\(T(EMPORADA )?[0-9S]{1,2}\) / [0-9S]{1,4})$/
T-8916-18-104:description=m/(?<shorttext>\(T(EMPORADA )?[0-9S]{1,2}\) / [0-9S]{1,4})$/
T-8916-18-104:shorttext=s/TEMPORADA /T/
T-8916-18-104:description=s/^.*? - //

#   T-8916-40000-41001 DKISS
# Mover temporada del título " (T12)" al final del texto corto
T-8916-40000-41001:title=m/^(?<title>.*)[ ](?<ashorttext>[(][T][0-9S]{1,2}[)])$/
# Eliminar título del texto corto
T-8916-40000-41001:shorttext=m/[ ](?<shorttext>[C][a][p][í][t][u][l][o][ ][0-9S]{1,3}[ ].*)$/

#   T-8916-17-155      mega
# Unificar películas con el prefijo "CINE: "
T-8916-17-155:title=s/^(CINE A LO BESTIA|CINE UNA DE SEAGAL|CINEMATRIX): /CINE: /

#   T-8916-15-153      neox
# Unificar películas con el prefijo "CINE: "
T-8916-15-153:title=s/^CINEMATRIX: /CINE: /
# Eliminar texto innecesario
T-8916-15-153:shorttext=s/^ESTRENO. //

#   T-8916-15-154      nova
# Unificar películas con el prefijo "CINE: "
T-8916-15-154:title=s/^(CINE SUPERNOVA|CINE MATINAL|NOCHE DE PELÍCULA|AMOR Y CRÍMEN|.*? NOVA): /CINE: /
# Eliminar texto innecesario
T-8916-15-154:title=s/ \(ESTRENO\)$//
T-8916-15-154:title=s/\(AUDIODESCRITOS\)$//
T-8916-15-154:title=s/ \(NUEVOS PROGRAMAS\)$//
T-8916-15-154:shorttext=s/^Título Castellano: //

#   T-8916-17-170      TRECE
# Unificar películas con el prefijo "CINE: "
T-8916-17-170:title=s/^(SESIÓN DOBLE|CINE WESTERN|SOBREMESA DE CINE|VIVA EL CINE ESPAÑOL): /CINE: /
# Eliminar texto innecesario
T-8916-17-170:description=s/ \(SUBTÍTULO?S?\)?( \(LENGUAJE DE SIGNOS\) \(AUDIODESCRIPCIÓN\))?$//
# Establecer la calificación parental (TP=Todos los Públicos)
T-8916-17-170:description=s/[(][T][P][)]$/(+0)/
#T-8916-17-170:description=m/[(][+](?<rating>[0-9S]{1,2})[)]$/
T-8916-17-170:description=m/^(?<description>.*)[ ]?[(][+](?<rating>[0-9S]{1,2})[)]$/
T-8916-17-170:description=s/[ ]?[(][+][0-9S]{1,2}[)]$//

#   T-8916-14-202      PARAMOUNT NETWORK
# Eliminar texto innecesario
T-8916-14-202:title=s/^(MARTES LETAL|TOP CINE|CINE CON ESTRELLA|LA NOCHE DEL DIRECTOR): ?//
T-8916-14-202:title=s/\. VIDEOSIGNADO Y AUDIODESCRITO$//

#   T-8916-17-192      Energy
# Unificar películas con el prefijo "CINE: "
T-8916-17-192:title=s/^CINERGETIC: /CINE: /
# Eliminar texto innecesario
T-8916-17-192:title=s/^(((SUPERLUNES|SUPERMARTES) DE )?DISTRITO 8|SUPERLUNEX .*?|SUPERMARTES|SUPERHAWAI .*?): //

#   T-8916-18-101      atreseries HD
# Eliminar texto innecesario
T-8916-18-101:title=s/^POP UP //
T-8916-18-101:description=s/^SUBTITULADO POP UP //

#   T-8916-18-103      Realmadrid TV HD
# Unificar películas con el prefijo "Cine: "
T-8916-18-103:title=s/^Cine. /Cine: /
# Eliminar texto innecesario
T-8916-18-103:description=s/Duración: [0-9S]{1,3} min.\n//

#   T-8916-14-278      GOL
# Mover texto corto a título si el título está vacío con un guión
T-8916-14-278:shorttext?title~m/^[-]$/=m/^(?<title>.*)$/
# Mover descripción al título si el título está vacío con un guión (texto corto estaba vacío)
T-8916-14-278:description?title~m/^[-]$/=m/^(?<title>.*)$/
# Borrar último guión en el título
T-8916-14-278:title?title~m/[ ]?[-]$/=s/[ ]?[-]$//

# Canales RTVE:
#   T-8916-1101-420    La 1
#   T-8916-1101-424    La 1 HD
#   T-8916-1101-421    La 2
#   T-8916-1101-428    La 2 HD
#   T-8916-40000-40002 tdp
#   T-8916-40000-40003 tdp HD
#   T-8916-1101-422    24h
#   T-8916-1101-423    Clan
#   T-8916-40000-40004 Clan
#   T-8916-40000-40001 Clan HD
# Mover año y número de episodio al texto corto
T-8916-1101-420,T-8916-1101-424,T-8916-1101-421,T-8916-1101-428,T-8916-40000-40002,T-8916-40000-40003,T-8916-1101-422,T-8916-1101-423,T-8916-40000-40004,T-8916-40000-40001:description=m/^(?<shorttext>Año:[0-9S]{1,4}; Núm. cap.:[0-9S]{1,5}); /
T-8916-1101-420,T-8916-1101-424,T-8916-1101-421,T-8916-1101-428,T-8916-40000-40002,T-8916-40000-40003,T-8916-1101-422,T-8916-1101-423,T-8916-40000-40004,T-8916-40000-40001:description=m/^(?<shorttext>Año:[0-9S]{1,4}); /
T-8916-1101-420,T-8916-1101-424,T-8916-1101-421,T-8916-1101-428,T-8916-40000-40002,T-8916-40000-40003,T-8916-1101-422,T-8916-1101-423,T-8916-40000-40004,T-8916-40000-40001:description=m/^(?<shorttext>Núm. cap.:[0-9S]{1,5}); /
T-8916-1101-420,T-8916-1101-424,T-8916-1101-421,T-8916-1101-428,T-8916-40000-40002,T-8916-40000-40003,T-8916-1101-422,T-8916-1101-423,T-8916-40000-40004,T-8916-40000-40001:shorttext=s/Núm. cap./Ep/g
T-8916-1101-420,T-8916-1101-424,T-8916-1101-421,T-8916-1101-428,T-8916-40000-40002,T-8916-40000-40003,T-8916-1101-422,T-8916-1101-423,T-8916-40000-40004,T-8916-40000-40001:shorttext=s/:/: /g
T-8916-1101-420,T-8916-1101-424,T-8916-1101-421,T-8916-1101-428,T-8916-40000-40002,T-8916-40000-40003,T-8916-1101-422,T-8916-1101-423,T-8916-40000-40004,T-8916-40000-40001:description=s/^(Año:[0-9S]{1,4}; )?(Núm. cap.:[0-9S]{1,5}; )?//
# Eliminar texto innecesario
T-8916-1101-420,T-8916-1101-424,T-8916-1101-421,T-8916-1101-428,T-8916-40000-40002,T-8916-40000-40003,T-8916-1101-422,T-8916-1101-423,T-8916-40000-40004,T-8916-40000-40001:description=s/(\n| )(SUBT(. LSE)?|(SUBT. )?AUDIODESC(. LSE)?). ?$//
T-8916-1101-422:title=s/\.$//

# Canales Mediaset:
#   T-8916-16-187      Cuatro
#   T-8916-16-191      Cuatro HD
#   T-8916-16-186      Telecinco
#   T-8916-16-190      Telecinco HD
#   T-8916-16-189      Divinity
#   T-8916-16-188      FDF
#   T-8916-17-193      Boing
#   T-8916-17-192      Energy
#   T-8916-18-102      BeMad tv HD
# Mover número de episodio al texto corto
T-8916-16-189,T-8916-16-188,T-8916-17-193,T-8916-17-192,T-8916-18-102:description=m/^(?<shorttext>[E][p][:][ ][0-9S]{1,5})[ ]?(?<description>.*)/
T-8916-16-189,T-8916-16-188,T-8916-17-193,T-8916-17-192,T-8916-18-102:description=s/^[E][p][:][ ][0-9S]{1,5}$//
# Eliminar texto innecesario
T-8916-16-189,T-8916-16-188,T-8916-17-193,T-8916-17-192,T-8916-18-102:description=s/^Duracion Aprox.: [0-9S]{1,3}' //
T-8916-16-187,T-8916-16-191,T-8916-16-186,T-8916-16-190,T-8916-16-189,T-8916-16-188,T-8916-17-193,T-8916-17-192,T-8916-18-102:description=s/^Sinopsis: //
T-8916-16-187,T-8916-16-191,T-8916-16-186,T-8916-16-190,T-8916-16-189,T-8916-16-188,T-8916-17-193,T-8916-17-192,T-8916-18-102:description=s/' Int.: / Int.: /
T-8916-16-187,T-8916-16-191,T-8916-16-186,T-8916-16-190,T-8916-16-189,T-8916-16-188,T-8916-17-193,T-8916-17-192,T-8916-18-102:title=s/: '/: /
T-8916-16-187,T-8916-16-191,T-8916-16-186,T-8916-16-190,T-8916-16-189,T-8916-16-188,T-8916-17-193,T-8916-17-192,T-8916-18-102:title=s/'$//
T-8916-16-187,T-8916-16-191,T-8916-16-186,T-8916-16-190,T-8916-16-189,T-8916-17-192,T-8916-18-102:title=s/ \(ESTRENO\)$//i
T-8916-16-187,T-8916-16-191,T-8916-16-186,T-8916-16-190,T-8916-16-189,T-8916-16-188,T-8916-17-193,T-8916-17-192,T-8916-18-102:description=s/ Sin Determinar//
T-8916-16-187,T-8916-16-191,T-8916-16-186,T-8916-16-190,T-8916-16-189,T-8916-16-188,T-8916-17-193,T-8916-17-192,T-8916-18-102:description=s/Duracion Aprox.: ' //
T-8916-16-187,T-8916-16-191,T-8916-16-186,T-8916-16-190,T-8916-16-189,T-8916-16-188,T-8916-17-193,T-8916-17-192,T-8916-18-102:description=s/""/"/g
T-8916-16-187,T-8916-16-191,T-8916-16-186,T-8916-16-190,T-8916-16-189,T-8916-16-188,T-8916-17-193,T-8916-17-192,T-8916-18-102:description=s/^"//
T-8916-16-187,T-8916-16-191,T-8916-16-186,T-8916-16-190,T-8916-16-189,T-8916-16-188,T-8916-17-193,T-8916-17-192,T-8916-18-102:description=s/"$//

# Canales Atresmedia:
#   T-8916-15-150      antena3
#   T-8916-15-149      antena3 HD
#   T-8916-15-152      laSexta
#   T-8916-15-151      laSexta HD
#   T-8916-17-155      mega
#   T-8916-15-153      neox
#   T-8916-15-154      nova
#   T-8916-18-101      atreseries HD
# Eliminar texto innecesario
T-8916-15-150,T-8916-15-149,T-8916-15-152,T-8916-15-151,T-8916-17-155,T-8916-15-153,T-8916-15-154,T-8916-18-101:shorttext=s/; Duración: [0-9S]{1,3}//
T-8916-15-150,T-8916-15-149,T-8916-15-152,T-8916-15-151,T-8916-17-155,T-8916-15-153,T-8916-15-154,T-8916-18-101:description=s/; Duración: [0-9S]{1,3}//
T-8916-15-150,T-8916-15-149,T-8916-15-152,T-8916-15-151,T-8916-17-155,T-8916-15-153,T-8916-15-154,T-8916-18-101:description=s/Duración:? ?.*?(\n|$)//g
T-8916-15-150,T-8916-15-149,T-8916-15-152,T-8916-15-151,T-8916-17-155,T-8916-15-153,T-8916-15-154,T-8916-18-101:description=s/(Año: (0|1)|Sinopsis: (-|.|...|SUBTITULADO? ?)|(Interpretes|Int.): --|Núm. cap.: 0000|Tit.: Contenedor vacío|Tit. original: Contenedor vacío|SUBTITULADO Contenedor vacío|Sinopsis: \[No Encontrado\]|Tit.: \[No Encontrado\]|Tit. original: \[No Encontrado\]|SUBTITULADO \[No Encontrado\])(\n|$)//g
T-8916-15-150,T-8916-15-149,T-8916-15-152,T-8916-15-151,T-8916-17-155,T-8916-15-153,T-8916-15-154,T-8916-18-101:description=s/(SUBTITULADO|Sinopsis: SUBTITULADO|Título Original:|Tit. orig. cap.:) .*?(\n|$)//g
T-8916-15-150,T-8916-15-149,T-8916-15-152,T-8916-15-151,T-8916-17-155,T-8916-15-153,T-8916-15-154,T-8916-18-101:description=s/(SUBTITULADO|AUDIODESCRITO|SIGNADO); //g
# Borrar posible retorno de carro al final de las reglas anteriores
T-8916-15-150,T-8916-15-149,T-8916-15-152,T-8916-15-151,T-8916-17-155,T-8916-15-153,T-8916-15-154,T-8916-18-101:description=s/\n$//

# Para todos los canales:
# Eliminar el punto final del texto corto
shorttext?shorttext=s/\.$//
# Eliminar retorno de carro al final de la descripción
#description=s/\n$//
